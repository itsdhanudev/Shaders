{"code":"#version 300 es\nprecision highp float;\n\nin vec2 o_screenCoords;\n\nuniform sampler2D u_cameraImage;\n\n/* pixel size */\nuniform float u_pixelSize;      // 2.0 – 64.0 (main control)\nuniform vec2  u_pixelScale;     // (1,1)\u003dsquare, (2,1)\u003dwide pixels\n\n/* behavior */\nuniform float u_centerWeight;   // 0.0 – 1.0 (pixelate edges more)\nuniform float u_softEdges;      // 0.0 – 1.0\nuniform float u_jitter;         // 0.0 – 1.0\nuniform float u_time;\n\n/* color */\nuniform float u_posterize;      // 0 \u003d off, \u003e1 \u003d steps\n\nout vec4 out0;\n\n/* hash */\nfloat hash(vec2 p) {\n    return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);\n}\n\nvoid main() {\n    vec2 uv \u003d o_screenCoords;\n\n    /* screen resolution */\n    vec2 res \u003d vec2(textureSize(u_cameraImage, 0));\n\n    /* distance from center */\n    float dist \u003d length(uv - 0.5);\n\n    /* center weighted pixel size */\n    float pixelSize \u003d\n        mix(u_pixelSize, u_pixelSize * 0.25, u_centerWeight * (1.0 - dist));\n\n    /* pixel grid */\n    vec2 pixelStep \u003d pixelSize / res * u_pixelScale;\n\n    /* jitter */\n    vec2 jitter \u003d vec2(\n        hash(uv + u_time) - 0.5,\n        hash(uv * 1.7 - u_time) - 0.5\n    ) * u_jitter * pixelStep;\n\n    /* snap UV */\n    vec2 snapped \u003d\n        floor((uv + jitter) / pixelStep) * pixelStep +\n        pixelStep * 0.5;\n\n    /* soft edge blend */\n    vec2 blend \u003d smoothstep(\n        snapped,\n        snapped + pixelStep * u_softEdges,\n        uv\n    );\n\n    vec3 color \u003d texture(u_cameraImage, snapped).rgb;\n\n    /* posterization */\n    if (u_posterize \u003e 1.0) {\n        color \u003d floor(color * u_posterize) / u_posterize;\n    }\n\n    out0 \u003d vec4(color, 1.0);\n}\n"}